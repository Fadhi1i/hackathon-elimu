<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Page</title>
    <link rel="stylesheet" href="style2.css" />
    <style>
      /* Unique inline styles for children section */
      .children-container {
        margin-top: 15px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
        background: #f9f9f9;
      }
      .child-entry {
        margin-bottom: 10px;
        padding: 8px;
        border-radius: 6px;
        background: #fff;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form id="signupForm" class="form">
        <h2>Create Your Account</h2>

        <div class="input-group">
          <label for="username">Full Name</label>
          <input type="text" id="username" name="full_name" required />
        </div>

        <div class="input-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" required />
        </div>

        <div class="input-group">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" required />
        </div>

        <div class="input-group">
          <label for="mobile_number">Mobile Number</label>
          <input type="tel" id="mobile_number" name="mobile_number" required />
        </div>

        <div class="input-group">
          <label for="childrenCount">Number of Children</label>
          <select id="childrenCount" name="childrenCount" required>
            <option value="">Select...</option>
            <option value="1">1 Child</option>
            <option value="2">2 Children</option>
            <option value="3">3 Children</option>
            <option value="4">4 Children</option>
            <option value="5">5 Children</option>
          </select>
        </div>

        <div
          id="childrenSection"
          class="children-container"
          style="display: none"
        >
          <h3>Children Details</h3>
          <div id="childrenInputs"></div>
        </div>

        <button type="submit" class="btn">Sign Up</button>
        <p class="redirect">
          Already have an account? <a href="login.html">Login</a>
        </p>
      </form>
    </div>

    <!-- Keep only the children dynamic form logic inline -->
    <script>
      const childrenCount = document.getElementById("childrenCount");
      const childrenSection = document.getElementById("childrenSection");
      const childrenInputs = document.getElementById("childrenInputs");

      childrenCount.addEventListener("change", function () {
        const count = parseInt(this.value);
        childrenInputs.innerHTML = "";

        if (count > 0) {
          childrenSection.style.display = "block";

          for (let i = 1; i <= count; i++) {
            const childDiv = document.createElement("div");
            childDiv.className = "child-entry";
            childDiv.innerHTML = `
            <label>Child ${i} Name</label>
            <input type="text" name="childName${i}" required>

            <label>Child ${i} Grade</label>
            <input type="text" name="childGrade${i}" required>
          `;
            childrenInputs.appendChild(childDiv);
          }
        } else {
          childrenSection.style.display = "none";
        }
      });
    </script>

    <!-- External Supabase Signup Logic -->
    <script type="module" src="signup.js"></script>
  </body>
</html>
